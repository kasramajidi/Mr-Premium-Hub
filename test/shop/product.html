<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <base href="../">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>محصول | فروشگاه — ريتكس</title>
  <link rel="icon" href="Images/Logo/Raitx%20international%20payments%20logo%20design%20(1).png">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="site-header"></div>
  <main class="site-main">
    <div class="container" style="padding-top: 2rem; padding-bottom: 3rem;">
      <div id="product-loading" style="text-align:center;padding:3rem;color:#6b7280;">در حال بارگذاری…</div>
      <div id="product-content" style="display:none;"></div>
      <div id="product-error" style="display:none;text-align:center;padding:3rem;color:#dc2626;">محصول یافت نشد.</div>
    </div>
  </main>
  <div id="site-footer"></div>
  <script src="js/layout.js"></script>
  <script>layout.init();</script>
  <script src="js/api.js"></script>
  <script>
    (function () {
      var m = /[?&]id=([^&]+)/.exec(window.location.search);
      var id = m ? m[1].trim() : '';
      var apiBase = window.API_BASE ? API_BASE() : 'https://mrpremiumhub.org/api.ashx';
      var loading = document.getElementById('product-loading');
      var content = document.getElementById('product-content');
      var err = document.getElementById('product-error');
      function showError() { loading.style.display = 'none'; err.style.display = 'block'; err.innerHTML = 'محصول یافت نشد. <a href="shop.html">بازگشت به فروشگاه</a>'; }
      if (!id) { showError(); return; }
      fetch(apiBase + '?action=shop')
        .then(function (r) { return r.json(); })
        .then(function (data) {
          var list = Array.isArray(data) ? data : (data && (data.data || data.items || data.products || data.list)) || [];
          var p = list.find(function (x) { return String(x.id || x.ID || '') === id; });
          loading.style.display = 'none';
          if (!p) { showError(); return; }
          var title = p.title || p.Title || p.name || '';
          var desc = p.description || p.Description || p.desc || '';
          var price = p.price || p.Price || '';
          var img = p.image || p.Image || p.img || '';
          if (img && img.indexOf('http') !== 0) img = img;
          document.title = (title || 'محصول') + ' | فروشگاه — ريتكس';
          content.innerHTML = '<div class="product-detail" style="background:#fff;border-radius:0.75rem;padding:1.5rem;max-width:40rem;margin:0 auto;">' + (img ? '<div style="margin-bottom:1rem;"><img src="' + img + '" alt="" style="width:100%;max-height:280px;object-fit:cover;border-radius:0.5rem;"></div>' : '') + '<h1 class="section-title">' + title + '</h1><p class="section-desc">' + desc + '</p>' + (price ? '<p style="font-weight:700;color:#111;">قیمت: ' + price + '</p>' : '') + '<p><a href="shop.html">← بازگشت به فروشگاه</a></p></div>';
          content.style.display = 'block';
        })
        .catch(function () { showError(); });
    })();
  </script>
  <script src="js/app.js"></script>
</body>
</html>
